<html>
<head>
  <title>Venner For Livet</title>
  <link rel="stylesheet" type="text/css" href="style.css" >
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js" charset="utf-8"></script>
  <script src="/socket.io/socket.io.js"></script>
</head>
<script type="text/javascript">
  var socket = io();

  function startGame() {
    $("#lobby").slideUp("slow", function() {
      $("#voting").slideDown("slow");
    });
  }

  function vote(name) {

  }
  function getUrlVars()
  {
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
      hash = hashes[i].split('=');
      vars.push(hash[0]);
      vars[hash[0]] = hash[1];
    }
    return vars;
  }

  $(document).ready(function() {
    var localgameID = getUrlVars()['id'];
    $.post('/GameName', {
      gameID:localgameID
    }, function(data, status) {
      $("#gameName").text(data);
    });
    $.post('/getPlayers', {
      gameID:localgameID
    }, function(data, status) {
      var playerList = "";
      for (let i = 0; i < data.length; i++) {
        playerList += "<li>" + data[i].playerName + "</li>";
      }
      $("#lobbyList").append(playerList);
      $("#votingList").append(playerList);
    });
  });
</script>
<body>
<div class="lobby" id="lobby"  >
  <button type="button" name="StartGame" onclick="startGame()">Start Game</button>
<ul id="lobbyList">

</ul>
</div>
<div class="voting" id="voting" style="display: none">
  <h2 id="question">Spørgsmål</h2>
<ul id="votingList">

</ul>
</div>
<h1 class="gameName" id="gameName"></h1>
</body>
</html>
